_M={}local a=0x07;local b=0x08;function clear_display()frame.display.text(" ",1,1)frame.display.show()frame.sleep(0.04)end;function show_flash()frame.display.bitmap(241,191,160,2,0,string.rep("\xFF",400))frame.display.bitmap(311,121,20,2,0,string.rep("\xFF",400))frame.display.show()frame.sleep(0.04)end;function _M.camera_capture_and_send(c)quality=c.quality or 50;auto_exp_gain_times=c.auto_exp_gain_times or 0;metering_mode=c.metering_mode or'SPOT'exposure=c.exposure or 0;shutter_kp=c.shutter_kp or 0.1;shutter_limit=c.shutter_limit or 6000;gain_kp=c.gain_kp or 1.0;gain_limit=c.gain_limit or 248.0;for d=1,auto_exp_gain_times,1 do frame.camera.auto{metering=metering_mode,exposure=exposure,shutter_kp=shutter_kp,shutter_limit=shutter_limit,gain_kp=gain_kp,gain_limit=gain_limit}frame.sleep(0.1)end;frame.camera.capture{quality_factor=quality}frame.sleep(0.1)local e=0;local f=''while true do f=frame.camera.read_raw(frame.bluetooth.max_length()-4)if f~=nil then pcall(frame.bluetooth.send,string.char(a)..f)e=e+string.len(f)frame.sleep(0.0125)else pcall(frame.bluetooth.send,string.char(b))frame.sleep(0.0125)break end end end;return _M